{"version":3,"file":"spectrogram.worker-C0giGhkj.js","sources":["../src/pkg/spectrogram/snippets/wasm-bindgen-rayon-38edf6e439f6d70d/src/workerHelpers.js","../src/pkg/spectrogram/wasm_spectrogram.js","../src/workers/spectrogram.worker.ts"],"sourcesContent":["/*\n * Copyright 2022 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Note: we use `wasm_bindgen_worker_`-prefixed message types to make sure\n// we can handle bundling into other files, which might happen to have their\n// own `postMessage`/`onmessage` communication channels.\n//\n// If we didn't take that into the account, we could send much simpler signals\n// like just `0` or whatever, but the code would be less resilient.\n\nfunction waitForMsgType(target, type) {\n  return new Promise(resolve => {\n    target.addEventListener('message', function onMsg({ data }) {\n      if (data?.type !== type) return;\n      target.removeEventListener('message', onMsg);\n      resolve(data);\n    });\n  });\n}\n\nwaitForMsgType(self, 'wasm_bindgen_worker_init').then(async ({ init, receiver }) => {\n  // # Note 1\n  // Our JS should have been generated in\n  // `[out-dir]/snippets/wasm-bindgen-rayon-[hash]/workerHelpers.js`,\n  // resolve the main module via `../../..`.\n  //\n  // This might need updating if the generated structure changes on wasm-bindgen\n  // side ever in the future, but works well with bundlers today. The whole\n  // point of this crate, after all, is to abstract away unstable features\n  // and temporary bugs so that you don't need to deal with them in your code.\n  //\n  // # Note 2\n  // This could be a regular import, but then some bundlers complain about\n  // circular deps.\n  //\n  // Dynamic import could be cheap if this file was inlined into the parent,\n  // which would require us just using `../../..` in `new Worker` below,\n  // but that doesn't work because wasm-pack unconditionally adds\n  // \"sideEffects\":false (see below).\n  //\n  // OTOH, even though it can't be inlined, it should be still reasonably\n  // cheap since the requested file is already in cache (it was loaded by\n  // the main thread).\n  const pkg = await import('../../..');\n  await pkg.default(init);\n  postMessage({ type: 'wasm_bindgen_worker_ready' });\n  pkg.wbg_rayon_start_worker(receiver);\n});\n\n// Note: this is never used, but necessary to prevent a bug in Firefox\n// (https://bugzilla.mozilla.org/show_bug.cgi?id=1702191) where it collects\n// Web Workers that have a shared WebAssembly memory with the main thread,\n// but are not explicitly rooted via a `Worker` instance.\n//\n// By storing them in a variable, we can keep `Worker` objects around and\n// prevent them from getting GC-d.\nlet _workers;\n\nexport async function startWorkers(module, memory, builder) {\n  if (builder.numThreads() === 0) {\n    throw new Error(`num_threads must be > 0.`);\n  }\n\n  const workerInit = {\n    type: 'wasm_bindgen_worker_init',\n    init: { module_or_path: module, memory },\n    receiver: builder.receiver()\n  };\n\n  _workers = await Promise.all(\n    Array.from({ length: builder.numThreads() }, async () => {\n      // Self-spawn into a new Worker.\n      //\n      // TODO: while `new URL('...', import.meta.url) becomes a semi-standard\n      // way to get asset URLs relative to the module across various bundlers\n      // and browser, ideally we should switch to `import.meta.resolve`\n      // once it becomes a standard.\n      //\n      // Note: we could use `../../..` as the URL here to inline workerHelpers.js\n      // into the parent entry instead of creating another split point -\n      // this would be preferable from optimization perspective -\n      // however, Webpack then eliminates all message handler code\n      // because wasm-pack produces \"sideEffects\":false in package.json\n      // unconditionally.\n      //\n      // The only way to work around that is to have side effect code\n      // in an entry point such as Worker file itself.\n      const worker = new Worker(new URL('./workerHelpers.js', import.meta.url), {\n        type: 'module'\n      });\n      worker.postMessage(workerInit);\n      await waitForMsgType(worker, 'wasm_bindgen_worker_ready');\n      return worker;\n    })\n  );\n  builder.build();\n}\n","import { startWorkers } from './snippets/wasm-bindgen-rayon-38edf6e439f6d70d/src/workerHelpers.js';\n\nlet wasm;\n\nlet cachedUint8ArrayMemory0 = null;\n\nfunction getUint8ArrayMemory0() {\n    if (cachedUint8ArrayMemory0 === null || cachedUint8ArrayMemory0.buffer !== wasm.memory.buffer) {\n        cachedUint8ArrayMemory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8ArrayMemory0;\n}\n\nlet cachedTextDecoder = (typeof TextDecoder !== 'undefined' ? new TextDecoder('utf-8', { ignoreBOM: true, fatal: true }) : undefined);\n\nif (cachedTextDecoder) cachedTextDecoder.decode();\n\nconst MAX_SAFARI_DECODE_BYTES = 2146435072;\nlet numBytesDecoded = 0;\nfunction decodeText(ptr, len) {\n    numBytesDecoded += len;\n    if (numBytesDecoded >= MAX_SAFARI_DECODE_BYTES) {\n        cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n        cachedTextDecoder.decode();\n        numBytesDecoded = len;\n    }\n    return cachedTextDecoder.decode(getUint8ArrayMemory0().slice(ptr, ptr + len));\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return decodeText(ptr, len);\n}\n\nfunction addToExternrefTable0(obj) {\n    const idx = wasm.__externref_table_alloc();\n    wasm.__wbindgen_externrefs.set(idx, obj);\n    return idx;\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        const idx = addToExternrefTable0(e);\n        wasm.__wbindgen_exn_store(idx);\n    }\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n\nlet cachedFloat32ArrayMemory0 = null;\n\nfunction getFloat32ArrayMemory0() {\n    if (cachedFloat32ArrayMemory0 === null || cachedFloat32ArrayMemory0.buffer !== wasm.memory.buffer) {\n        cachedFloat32ArrayMemory0 = new Float32Array(wasm.memory.buffer);\n    }\n    return cachedFloat32ArrayMemory0;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nfunction passArrayF32ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 4, 4) >>> 0;\n    getFloat32ArrayMemory0().set(arg, ptr / 4);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\n\nfunction passArray8ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 1, 1) >>> 0;\n    getUint8ArrayMemory0().set(arg, ptr / 1);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\n\nfunction _assertClass(instance, klass) {\n    if (!(instance instanceof klass)) {\n        throw new Error(`expected instance of ${klass.name}`);\n    }\n}\n\nfunction takeFromExternrefTable0(idx) {\n    const value = wasm.__wbindgen_externrefs.get(idx);\n    wasm.__externref_table_dealloc(idx);\n    return value;\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getUint8ArrayMemory0().subarray(ptr / 1, ptr / 1 + len);\n}\n/**\n * @param {Float32Array} audio_data\n * @param {Uint8Array} palette\n * @param {SpectrogramConfig} config\n * @returns {Uint8Array}\n */\nexport function generate_spectrogram_image(audio_data, palette, config) {\n    const ptr0 = passArrayF32ToWasm0(audio_data, wasm.__wbindgen_malloc);\n    const len0 = WASM_VECTOR_LEN;\n    const ptr1 = passArray8ToWasm0(palette, wasm.__wbindgen_malloc);\n    const len1 = WASM_VECTOR_LEN;\n    _assertClass(config, SpectrogramConfig);\n    const ret = wasm.generate_spectrogram_image(ptr0, len0, ptr1, len1, config.__wbg_ptr);\n    if (ret[3]) {\n        throw takeFromExternrefTable0(ret[2]);\n    }\n    var v3 = getArrayU8FromWasm0(ret[0], ret[1]).slice();\n    wasm.__wbindgen_free(ret[0], ret[1] * 1, 1);\n    return v3;\n}\n\n/**\n * @param {number} num_threads\n * @returns {Promise<any>}\n */\nexport function init_thread_pool(num_threads) {\n    const ret = wasm.init_thread_pool(num_threads);\n    return ret;\n}\n\n/**\n * @param {number} num_threads\n * @returns {Promise<any>}\n */\nexport function initThreadPool(num_threads) {\n    const ret = wasm.initThreadPool(num_threads);\n    return ret;\n}\n\n/**\n * @param {number} receiver\n */\nexport function wbg_rayon_start_worker(receiver) {\n    wasm.wbg_rayon_start_worker(receiver);\n}\n\nconst SpectrogramConfigFinalization = (typeof FinalizationRegistry === 'undefined')\n    ? { register: () => {}, unregister: () => {} }\n    : new FinalizationRegistry(ptr => wasm.__wbg_spectrogramconfig_free(ptr >>> 0, 1));\n\nexport class SpectrogramConfig {\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        SpectrogramConfigFinalization.unregister(this);\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_spectrogramconfig_free(ptr, 0);\n    }\n    /**\n     * @param {number} sample_rate\n     * @param {number} fft_size\n     * @param {number} hop_length\n     * @param {number} img_width\n     * @param {number} img_height\n     * @param {number} gain\n     */\n    constructor(sample_rate, fft_size, hop_length, img_width, img_height, gain) {\n        const ret = wasm.spectrogramconfig_new(sample_rate, fft_size, hop_length, img_width, img_height, gain);\n        this.__wbg_ptr = ret >>> 0;\n        SpectrogramConfigFinalization.register(this, this.__wbg_ptr, this);\n        return this;\n    }\n    /**\n     * @returns {number}\n     */\n    get sample_rate() {\n        const ret = wasm.__wbg_get_spectrogramconfig_sample_rate(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    /**\n     * @param {number} arg0\n     */\n    set sample_rate(arg0) {\n        wasm.__wbg_set_spectrogramconfig_sample_rate(this.__wbg_ptr, arg0);\n    }\n    /**\n     * @returns {number}\n     */\n    get fft_size() {\n        const ret = wasm.__wbg_get_spectrogramconfig_fft_size(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    /**\n     * @param {number} arg0\n     */\n    set fft_size(arg0) {\n        wasm.__wbg_set_spectrogramconfig_fft_size(this.__wbg_ptr, arg0);\n    }\n    /**\n     * @returns {number}\n     */\n    get hop_length() {\n        const ret = wasm.__wbg_get_spectrogramconfig_hop_length(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    /**\n     * @param {number} arg0\n     */\n    set hop_length(arg0) {\n        wasm.__wbg_set_spectrogramconfig_hop_length(this.__wbg_ptr, arg0);\n    }\n    /**\n     * @returns {number}\n     */\n    get img_width() {\n        const ret = wasm.__wbg_get_spectrogramconfig_img_width(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    /**\n     * @param {number} arg0\n     */\n    set img_width(arg0) {\n        wasm.__wbg_set_spectrogramconfig_img_width(this.__wbg_ptr, arg0);\n    }\n    /**\n     * @returns {number}\n     */\n    get img_height() {\n        const ret = wasm.__wbg_get_spectrogramconfig_img_height(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    /**\n     * @param {number} arg0\n     */\n    set img_height(arg0) {\n        wasm.__wbg_set_spectrogramconfig_img_height(this.__wbg_ptr, arg0);\n    }\n    /**\n     * @returns {number}\n     */\n    get gain() {\n        const ret = wasm.__wbg_get_spectrogramconfig_gain(this.__wbg_ptr);\n        return ret;\n    }\n    /**\n     * @param {number} arg0\n     */\n    set gain(arg0) {\n        wasm.__wbg_set_spectrogramconfig_gain(this.__wbg_ptr, arg0);\n    }\n}\nif (Symbol.dispose) SpectrogramConfig.prototype[Symbol.dispose] = SpectrogramConfig.prototype.free;\n\nconst wbg_rayon_PoolBuilderFinalization = (typeof FinalizationRegistry === 'undefined')\n    ? { register: () => {}, unregister: () => {} }\n    : new FinalizationRegistry(ptr => wasm.__wbg_wbg_rayon_poolbuilder_free(ptr >>> 0, 1));\n\nexport class wbg_rayon_PoolBuilder {\n\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(wbg_rayon_PoolBuilder.prototype);\n        obj.__wbg_ptr = ptr;\n        wbg_rayon_PoolBuilderFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        wbg_rayon_PoolBuilderFinalization.unregister(this);\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_wbg_rayon_poolbuilder_free(ptr, 0);\n    }\n    /**\n     * @returns {number}\n     */\n    numThreads() {\n        const ret = wasm.wbg_rayon_poolbuilder_numThreads(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    build() {\n        wasm.wbg_rayon_poolbuilder_build(this.__wbg_ptr);\n    }\n    /**\n     * @returns {number}\n     */\n    receiver() {\n        const ret = wasm.wbg_rayon_poolbuilder_receiver(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n}\nif (Symbol.dispose) wbg_rayon_PoolBuilder.prototype[Symbol.dispose] = wbg_rayon_PoolBuilder.prototype.free;\n\nconst EXPECTED_RESPONSE_TYPES = new Set(['basic', 'cors', 'default']);\n\nasync function __wbg_load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n\n            } catch (e) {\n                const validResponse = module.ok && EXPECTED_RESPONSE_TYPES.has(module.type);\n\n                if (validResponse && module.headers.get('Content-Type') !== 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n\n        } else {\n            return instance;\n        }\n    }\n}\n\nfunction __wbg_get_imports(memory) {\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbg___wbindgen_is_undefined_2d472862bd29a478 = function(arg0) {\n        const ret = arg0 === undefined;\n        return ret;\n    };\n    imports.wbg.__wbg___wbindgen_memory_27faa6e0e73716bd = function() {\n        const ret = wasm.memory;\n        return ret;\n    };\n    imports.wbg.__wbg___wbindgen_module_66f1f22805762dd9 = function() {\n        const ret = __wbg_init.__wbindgen_wasm_module;\n        return ret;\n    };\n    imports.wbg.__wbg___wbindgen_throw_b855445ff6a94295 = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n    imports.wbg.__wbg_call_e762c39fa8ea36bf = function() { return handleError(function (arg0, arg1) {\n        const ret = arg0.call(arg1);\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_instanceof_Window_4846dbb3de56c84c = function(arg0) {\n        let result;\n        try {\n            result = arg0 instanceof Window;\n        } catch (_) {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_new_a7442b4b19c1a356 = function(arg0, arg1) {\n        const ret = new Error(getStringFromWasm0(arg0, arg1));\n        return ret;\n    };\n    imports.wbg.__wbg_new_no_args_ee98eee5275000a4 = function(arg0, arg1) {\n        const ret = new Function(getStringFromWasm0(arg0, arg1));\n        return ret;\n    };\n    imports.wbg.__wbg_startWorkers_2ca11761e08ff5d5 = function(arg0, arg1, arg2) {\n        const ret = startWorkers(arg0, arg1, wbg_rayon_PoolBuilder.__wrap(arg2));\n        return ret;\n    };\n    imports.wbg.__wbg_static_accessor_GLOBAL_89e1d9ac6a1b250e = function() {\n        const ret = typeof global === 'undefined' ? null : global;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_GLOBAL_THIS_8b530f326a9e48ac = function() {\n        const ret = typeof globalThis === 'undefined' ? null : globalThis;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_SELF_6fdf4b64710cc91b = function() {\n        const ret = typeof self === 'undefined' ? null : self;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_WINDOW_b45bfc5a37f6cfa2 = function() {\n        const ret = typeof window === 'undefined' ? null : window;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbindgen_init_externref_table = function() {\n        const table = wasm.__wbindgen_externrefs;\n        const offset = table.grow(4);\n        table.set(0, undefined);\n        table.set(offset + 0, undefined);\n        table.set(offset + 1, null);\n        table.set(offset + 2, true);\n        table.set(offset + 3, false);\n        ;\n    };\n    imports.wbg.memory = memory || new WebAssembly.Memory({initial:18,maximum:16384,shared:true});\n\n    return imports;\n}\n\nfunction __wbg_finalize_init(instance, module, thread_stack_size) {\n    wasm = instance.exports;\n    __wbg_init.__wbindgen_wasm_module = module;\n    cachedFloat32ArrayMemory0 = null;\n    cachedUint8ArrayMemory0 = null;\n\n    if (typeof thread_stack_size !== 'undefined' && (typeof thread_stack_size !== 'number' || thread_stack_size === 0 || thread_stack_size % 65536 !== 0)) { throw 'invalid stack size' }\n    wasm.__wbindgen_start(thread_stack_size);\n    return wasm;\n}\n\nfunction initSync(module, memory) {\n    if (wasm !== undefined) return wasm;\n\n    let thread_stack_size\n    if (typeof module !== 'undefined') {\n        if (Object.getPrototypeOf(module) === Object.prototype) {\n            ({module, memory, thread_stack_size} = module)\n        } else {\n            console.warn('using deprecated parameters for `initSync()`; pass a single object instead')\n        }\n    }\n\n    const imports = __wbg_get_imports(memory);\n\n    if (!(module instanceof WebAssembly.Module)) {\n        module = new WebAssembly.Module(module);\n    }\n\n    const instance = new WebAssembly.Instance(module, imports);\n\n    return __wbg_finalize_init(instance, module, thread_stack_size);\n}\n\nasync function __wbg_init(module_or_path, memory) {\n    if (wasm !== undefined) return wasm;\n\n    let thread_stack_size\n    if (typeof module_or_path !== 'undefined') {\n        if (Object.getPrototypeOf(module_or_path) === Object.prototype) {\n            ({module_or_path, memory, thread_stack_size} = module_or_path)\n        } else {\n            console.warn('using deprecated parameters for the initialization function; pass a single object instead')\n        }\n    }\n\n    if (typeof module_or_path === 'undefined') {\n        module_or_path = new URL('wasm_spectrogram_bg.wasm', import.meta.url);\n    }\n    const imports = __wbg_get_imports(memory);\n\n    if (typeof module_or_path === 'string' || (typeof Request === 'function' && module_or_path instanceof Request) || (typeof URL === 'function' && module_or_path instanceof URL)) {\n        module_or_path = fetch(module_or_path);\n    }\n\n    const { instance, module } = await __wbg_load(await module_or_path, imports);\n\n    return __wbg_finalize_init(instance, module, thread_stack_size);\n}\n\nexport { initSync };\nexport default __wbg_init;\n","import init, {\n\tgenerate_spectrogram_image,\n\tinitThreadPool,\n\tSpectrogramConfig,\n} from \"$/pkg/spectrogram/wasm_spectrogram\";\nimport type { SpectrogramWorkerScope } from \"$/types/spectrogram\";\n\nconst ctx: SpectrogramWorkerScope = self as SpectrogramWorkerScope;\n\nlet fullAudioData: Float32Array | null = null;\nlet audioSampleRate: number = 0;\nlet wasmInitialized: Promise<void> | null = null;\nlet currentPalette: Uint8Array | null = null;\n\nasync function initializeWasm() {\n\tif (!wasmInitialized) {\n\t\twasmInitialized = (async () => {\n\t\t\tawait init();\n\t\t\tawait initThreadPool(navigator.hardwareConcurrency);\n\t\t})();\n\t}\n\tawait wasmInitialized;\n}\n\nctx.onmessage = async (event) => {\n\tawait initializeWasm();\n\n\tconst msg = event.data;\n\n\tswitch (msg.type) {\n\t\tcase \"INIT\":\n\t\t\tfullAudioData = msg.audioData;\n\t\t\taudioSampleRate = msg.sampleRate;\n\t\t\tcurrentPalette = null;\n\t\t\tctx.postMessage({ type: \"INIT_COMPLETE\" });\n\t\t\tbreak;\n\t\tcase \"SET_PALETTE\":\n\t\t\tcurrentPalette = msg.palette;\n\t\t\tbreak;\n\t\tcase \"GET_TILE\": {\n\t\t\tconst { reqId, params } = msg;\n\n\t\t\tif (!fullAudioData || !audioSampleRate || !currentPalette) {\n\t\t\t\tctx.postMessage({\n\t\t\t\t\ttype: \"ERROR\",\n\t\t\t\t\treqId,\n\t\t\t\t\tmessage: \"Worker not ready\",\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { startTime, endTime, gain, tileWidthPx, height } = params;\n\n\t\t\tconst startSample = Math.floor(startTime * audioSampleRate);\n\t\t\tconst endSample = Math.ceil(endTime * audioSampleRate);\n\n\t\t\tif (startSample >= fullAudioData.length) {\n\t\t\t\tctx.postMessage({\n\t\t\t\t\ttype: \"ERROR\",\n\t\t\t\t\treqId,\n\t\t\t\t\tmessage: \"Out of bounds\",\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst audioSlice = fullAudioData.subarray(\n\t\t\t\tstartSample,\n\t\t\t\tMath.min(endSample, fullAudioData.length),\n\t\t\t);\n\n\t\t\tconst FFT_SIZE = 1024;\n\t\t\tconst HOP_LENGTH = 64;\n\n\t\t\ttry {\n\t\t\t\tconst config = new SpectrogramConfig(\n\t\t\t\t\taudioSampleRate,\n\t\t\t\t\tFFT_SIZE,\n\t\t\t\t\tHOP_LENGTH,\n\t\t\t\t\ttileWidthPx,\n\t\t\t\t\theight,\n\t\t\t\t\tgain,\n\t\t\t\t);\n\n\t\t\t\tconst pixelData = generate_spectrogram_image(\n\t\t\t\t\taudioSlice,\n\t\t\t\t\tcurrentPalette,\n\t\t\t\t\tconfig,\n\t\t\t\t);\n\n\t\t\t\tconfig.free();\n\n\t\t\t\tconst canvas = new OffscreenCanvas(tileWidthPx, height);\n\t\t\t\tconst context = canvas.getContext(\"2d\");\n\t\t\t\tif (!context) throw new Error(\"OffscreenCanvas context 失败\");\n\n\t\t\t\tconst imageData = new ImageData(\n\t\t\t\t\tnew Uint8ClampedArray(pixelData),\n\t\t\t\t\ttileWidthPx,\n\t\t\t\t\theight,\n\t\t\t\t);\n\t\t\t\tcontext.putImageData(imageData, 0, 0);\n\n\t\t\t\tconst imageBitmap = canvas.transferToImageBitmap();\n\t\t\t\tctx.postMessage(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"TILE_READY\",\n\t\t\t\t\t\treqId,\n\t\t\t\t\t\timageBitmap,\n\t\t\t\t\t},\n\t\t\t\t\t[imageBitmap],\n\t\t\t\t);\n\t\t\t} catch (e) {\n\t\t\t\tctx.postMessage({\n\t\t\t\t\ttype: \"ERROR\",\n\t\t\t\t\treqId,\n\t\t\t\t\tmessage: (e as Error).message,\n\t\t\t\t});\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n};\n"],"names":["waitForMsgType","target","type","resolve","onMsg","data","init","receiver","pkg","wasm_spectrogram","startWorkers","module","memory","builder","workerInit","worker","wasm","cachedUint8ArrayMemory0","getUint8ArrayMemory0","cachedTextDecoder","MAX_SAFARI_DECODE_BYTES","numBytesDecoded","decodeText","ptr","len","getStringFromWasm0","addToExternrefTable0","obj","idx","handleError","f","args","e","isLikeNone","x","cachedFloat32ArrayMemory0","getFloat32ArrayMemory0","WASM_VECTOR_LEN","passArrayF32ToWasm0","arg","malloc","passArray8ToWasm0","_assertClass","instance","klass","takeFromExternrefTable0","value","getArrayU8FromWasm0","generate_spectrogram_image","audio_data","palette","config","ptr0","len0","ptr1","len1","SpectrogramConfig","ret","v3","initThreadPool","num_threads","wbg_rayon_start_worker","SpectrogramConfigFinalization","sample_rate","fft_size","hop_length","img_width","img_height","gain","arg0","wbg_rayon_PoolBuilderFinalization","wbg_rayon_PoolBuilder","EXPECTED_RESPONSE_TYPES","__wbg_load","imports","bytes","__wbg_get_imports","__wbg_init","arg1","result","arg2","table","offset","__wbg_finalize_init","thread_stack_size","module_or_path","ctx","fullAudioData","audioSampleRate","wasmInitialized","currentPalette","initializeWasm","event","msg","reqId","params","startTime","endTime","tileWidthPx","height","startSample","endSample","audioSlice","FFT_SIZE","HOP_LENGTH","pixelData","canvas","context","imageData","imageBitmap"],"mappings":"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"}