{"version":3,"file":"edit-mode-C-QS8KYm.js","sources":["../../src/components/RibbonBar/edit-mode.tsx"],"sourcesContent":["/*\n * Copyright 2023-2025 Steve Xiao (stevexmh@qq.com) and contributors.\n *\n * 本源代码文件是属于 AMLL TTML Tool 项目的一部分。\n * This source code file is a part of AMLL TTML Tool project.\n * 本项目的源代码的使用受到 GNU GENERAL PUBLIC LICENSE version 3 许可证的约束，具体可以参阅以下链接。\n * Use of this source code is governed by the GNU GPLv3 license that can be found through the following link.\n *\n * https://github.com/Steve-xmh/amll-ttml-tool/blob/main/LICENSE\n */\n\nimport {\n\tButton,\n\tCheckbox,\n\tFlex,\n\tGrid,\n\tRadioGroup,\n\tText,\n\tTextField,\n} from \"@radix-ui/themes\";\nimport { atom, useAtom, useAtomValue, useSetAtom, useStore } from \"jotai\";\nimport { useSetImmerAtom } from \"jotai-immer\";\nimport {\n\ttype FC,\n\tforwardRef,\n\tuseCallback,\n\tuseEffect,\n\tuseId,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseRef,\n\tuseState,\n} from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n\tLayoutMode,\n\tlayoutModeAtom,\n\tshowLineRomanizationAtom,\n\tshowLineTranslationAtom,\n\tshowWordRomanizationInputAtom,\n} from \"$/states/config\";\nimport {\n\teditingTimeFieldAtom,\n\tlyricLinesAtom,\n\trequestFocusAtom,\n\tSyllableDisplayMode,\n\tselectedLinesAtom,\n\tselectedWordsAtom,\n\tshowAllSyllablesAtom,\n\tsyllableDisplayModeAtom,\n} from \"$/states/main.ts\";\nimport { msToTimestamp, parseTimespan } from \"$/utils/timestamp.ts\";\nimport {\n\ttype LyricLine,\n\ttype LyricWord,\n\tnewLyricLine,\n} from \"$/utils/ttml-types.ts\";\nimport { RibbonFrame, RibbonSection } from \"./common\";\n\nconst MULTIPLE_VALUES = Symbol(\"multiple-values\");\n\nfunction EditField<\n\tL extends Word extends true ? LyricWord : LyricLine,\n\tF extends keyof L,\n\tWord extends boolean | undefined = undefined,\n>({\n\tlabel,\n\tisWordField,\n\tfieldName,\n\tformatter,\n\tparser,\n\ttextFieldStyle,\n}: {\n\tlabel: string;\n\tisWordField?: Word;\n\tfieldName: F;\n\tformatter: (v: L[F]) => string;\n\tparser: (v: string) => L[F];\n\ttextFieldStyle?: React.CSSProperties;\n}) {\n\tconst [fieldInput, setFieldInput] = useState<string | undefined>(undefined);\n\tconst [fieldPlaceholder, setFieldPlaceholder] = useState<string>(\"\");\n\tconst itemAtom = useMemo(\n\t\t() => (isWordField ? selectedWordsAtom : selectedLinesAtom),\n\t\t[isWordField],\n\t);\n\n\tconst editLyricLines = useSetImmerAtom(lyricLinesAtom);\n\tconst { t } = useTranslation();\n\tconst setEditingTimeField = useSetAtom(editingTimeFieldAtom);\n\n\tconst [requestFocus, setRequestFocus] = useAtom(requestFocusAtom);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\n\tuseEffect(() => {\n\t\tif (requestFocus === fieldName && !isWordField && inputRef.current) {\n\t\t\tinputRef.current.focus();\n\t\t\tsetRequestFocus(null);\n\t\t}\n\t}, [requestFocus, fieldName, isWordField, setRequestFocus]);\n\n\tconst hasErrorAtom = useMemo(\n\t\t() =>\n\t\t\tatom((get) => {\n\t\t\t\tif (fieldName !== \"startTime\" && fieldName !== \"endTime\") {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst selectedItems = get(itemAtom);\n\t\t\t\tif (selectedItems.size === 0) return false;\n\n\t\t\t\tconst lyricLines = get(lyricLinesAtom);\n\n\t\t\t\tif (isWordField) {\n\t\t\t\t\tconst selectedWords = selectedItems;\n\t\t\t\t\tfor (const line of lyricLines.lyricLines) {\n\t\t\t\t\t\tfor (const word of line.words) {\n\t\t\t\t\t\t\tif (selectedWords.has(word.id)) {\n\t\t\t\t\t\t\t\tif (word.startTime > word.endTime) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst selectedLines = selectedItems;\n\t\t\t\t\tfor (const line of lyricLines.lyricLines) {\n\t\t\t\t\t\tif (selectedLines.has(line.id)) {\n\t\t\t\t\t\t\tif (line.startTime > line.endTime) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}),\n\t\t[fieldName, isWordField, itemAtom],\n\t);\n\tconst hasError = useAtomValue(hasErrorAtom);\n\n\tconst currentValueAtom = useMemo(\n\t\t() =>\n\t\t\tatom((get) => {\n\t\t\t\tconst selectedItems = get(itemAtom);\n\t\t\t\tconst lyricLines = get(lyricLinesAtom);\n\t\t\t\tif (selectedItems.size === 0) return undefined;\n\n\t\t\t\tif (isWordField) {\n\t\t\t\t\tconst selectedWords = selectedItems as Set<string>;\n\t\t\t\t\tconst values = new Set();\n\t\t\t\t\tfor (const line of lyricLines.lyricLines) {\n\t\t\t\t\t\tfor (const word of line.words) {\n\t\t\t\t\t\t\tif (selectedWords.has(word.id)) {\n\t\t\t\t\t\t\t\tvalues.add(word[fieldName as keyof LyricWord]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (values.size === 1)\n\t\t\t\t\t\treturn formatter(values.values().next().value as L[F]);\n\t\t\t\t\treturn MULTIPLE_VALUES;\n\t\t\t\t}\n\t\t\t\tconst selectedLines = selectedItems as Set<string>;\n\t\t\t\tconst values = new Set();\n\t\t\t\tfor (const line of lyricLines.lyricLines) {\n\t\t\t\t\tif (selectedLines.has(line.id)) {\n\t\t\t\t\t\tvalues.add(line[fieldName as keyof LyricLine]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (values.size === 1)\n\t\t\t\t\treturn formatter(values.values().next().value as L[F]);\n\t\t\t\treturn MULTIPLE_VALUES;\n\t\t\t}),\n\t\t[fieldName, formatter, isWordField, itemAtom],\n\t);\n\tconst currentValue = useAtomValue(currentValueAtom);\n\tconst store = useStore();\n\n\tconst onInputFinished = useCallback(\n\t\t(rawValue: string) => {\n\t\t\ttry {\n\t\t\t\tconst selectedItems = store.get(itemAtom);\n\t\t\t\tconst value = parser(rawValue);\n\t\t\t\teditLyricLines((state) => {\n\t\t\t\t\tfor (const line of state.lyricLines) {\n\t\t\t\t\t\tif (isWordField) {\n\t\t\t\t\t\t\tfor (const word of line.words) {\n\t\t\t\t\t\t\t\tif (selectedItems.has(word.id)) {\n\t\t\t\t\t\t\t\t\t(word as L)[fieldName] = value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (selectedItems.has(line.id)) {\n\t\t\t\t\t\t\t\t(line as L)[fieldName] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn state;\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tif (typeof currentValue === \"string\") setFieldInput(currentValue);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\titemAtom,\n\t\t\tstore,\n\t\t\teditLyricLines,\n\t\t\tcurrentValue,\n\t\t\tfieldName,\n\t\t\tisWordField,\n\t\t\tparser,\n\t\t],\n\t);\n\n\tuseLayoutEffect(() => {\n\t\tif (currentValue === MULTIPLE_VALUES) {\n\t\t\tsetFieldInput(\"\");\n\t\t\tsetFieldPlaceholder(t(\"ribbonBar.editMode.multipleValues\", \"多个值...\"));\n\t\t} else {\n\t\t\tsetFieldInput(currentValue);\n\t\t\tsetFieldPlaceholder(\"\");\n\t\t}\n\t}, [currentValue, t]);\n\n\treturn (\n\t\t<>\n\t\t\t<Text wrap=\"nowrap\" size=\"1\">\n\t\t\t\t{label}\n\t\t\t</Text>\n\t\t\t<TextField.Root\n\t\t\t\tref={inputRef}\n\t\t\t\tsize=\"1\"\n\t\t\t\tcolor={hasError ? \"red\" : undefined}\n\t\t\t\tvariant={hasError ? \"soft\" : undefined}\n\t\t\t\tstyle={{ width: \"8em\", ...textFieldStyle }}\n\t\t\t\tvalue={fieldInput ?? \"\"}\n\t\t\t\tplaceholder={fieldPlaceholder}\n\t\t\t\tdisabled={fieldInput === undefined}\n\t\t\t\tonChange={(evt) => setFieldInput(evt.currentTarget.value)}\n\t\t\t\tonKeyDown={(evt) => {\n\t\t\t\t\tif (evt.key !== \"Enter\") return;\n\t\t\t\t\tonInputFinished(evt.currentTarget.value);\n\t\t\t\t}}\n\t\t\t\tonFocus={() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!isWordField &&\n\t\t\t\t\t\t(fieldName === \"startTime\" || fieldName === \"endTime\")\n\t\t\t\t\t) {\n\t\t\t\t\t\tsetEditingTimeField({\n\t\t\t\t\t\t\tisWord: false,\n\t\t\t\t\t\t\tfield: fieldName as \"startTime\" | \"endTime\",\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonBlur={(evt) => {\n\t\t\t\t\tsetEditingTimeField(null);\n\n\t\t\t\t\tif (evt.currentTarget.value === currentValue) return;\n\t\t\t\t\tonInputFinished(evt.currentTarget.value);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nfunction CheckboxField<\n\tL extends Word extends true ? LyricWord : LyricLine,\n\tF extends keyof L,\n\tV extends L[F] extends boolean ? boolean : never,\n\tWord extends boolean | undefined = undefined,\n>({\n\tlabel,\n\tisWordField,\n\tfieldName,\n\tdefaultValue,\n}: {\n\tlabel: string;\n\tisWordField: Word;\n\tfieldName: F;\n\tdefaultValue: V;\n}) {\n\tconst itemAtom = useMemo(\n\t\t() => (isWordField ? selectedWordsAtom : selectedLinesAtom),\n\t\t[isWordField],\n\t);\n\n\tconst editLyricLines = useSetImmerAtom(lyricLinesAtom);\n\tconst store = useStore();\n\n\tconst currentValueAtom = useMemo(\n\t\t() =>\n\t\t\tatom((get) => {\n\t\t\t\tconst selectedItems = get(itemAtom);\n\t\t\t\tconst lyricLines = get(lyricLinesAtom);\n\t\t\t\tif (selectedItems.size) {\n\t\t\t\t\tif (isWordField) {\n\t\t\t\t\t\tconst selectedWords = selectedItems as Set<string>;\n\t\t\t\t\t\tconst values = new Set();\n\t\t\t\t\t\tfor (const line of lyricLines.lyricLines) {\n\t\t\t\t\t\t\tfor (const word of line.words) {\n\t\t\t\t\t\t\t\tif (selectedWords.has(word.id)) {\n\t\t\t\t\t\t\t\t\tvalues.add(word[fieldName as keyof LyricWord]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (values.size === 1) return values.values().next().value as L[F];\n\t\t\t\t\t\treturn MULTIPLE_VALUES;\n\t\t\t\t\t}\n\t\t\t\t\tconst selectedLines = selectedItems as Set<string>;\n\t\t\t\t\tconst values = new Set();\n\t\t\t\t\tfor (const line of lyricLines.lyricLines) {\n\t\t\t\t\t\tif (selectedLines.has(line.id)) {\n\t\t\t\t\t\t\tvalues.add(line[fieldName as keyof LyricLine]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (values.size === 1) return values.values().next().value as L[F];\n\t\t\t\t\treturn MULTIPLE_VALUES;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}),\n\t\t[itemAtom, fieldName, isWordField],\n\t);\n\tconst currentValue = useAtomValue(currentValueAtom);\n\tconst isDisabledAtom = useMemo(\n\t\t() => atom((get) => get(itemAtom).size === 0),\n\t\t[itemAtom],\n\t);\n\tconst isDisabled = useAtomValue(isDisabledAtom);\n\tconst checkboxId = useId();\n\n\treturn (\n\t\t<>\n\t\t\t<Text wrap=\"nowrap\" size=\"1\">\n\t\t\t\t<label htmlFor={checkboxId}>{label}</label>\n\t\t\t</Text>\n\t\t\t<Checkbox\n\t\t\t\tdisabled={isDisabled}\n\t\t\t\tid={checkboxId}\n\t\t\t\tchecked={\n\t\t\t\t\tcurrentValue\n\t\t\t\t\t\t? currentValue === MULTIPLE_VALUES\n\t\t\t\t\t\t\t? \"indeterminate\"\n\t\t\t\t\t\t\t: (currentValue as boolean)\n\t\t\t\t\t\t: defaultValue\n\t\t\t\t}\n\t\t\t\tonCheckedChange={(value) => {\n\t\t\t\t\tif (value === \"indeterminate\") return;\n\t\t\t\t\teditLyricLines((state) => {\n\t\t\t\t\t\tconst selectedItems = store.get(itemAtom);\n\t\t\t\t\t\tfor (const line of state.lyricLines) {\n\t\t\t\t\t\t\tif (isWordField) {\n\t\t\t\t\t\t\t\tfor (const word of line.words) {\n\t\t\t\t\t\t\t\t\tif (selectedItems.has(word.id)) {\n\t\t\t\t\t\t\t\t\t\t(word as L)[fieldName] = value as L[F];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (selectedItems.has(line.id)) {\n\t\t\t\t\t\t\t\t\t(line as L)[fieldName] = value as L[F];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn state;\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nfunction EditModeField({\n\tsimpleModeLabel = \"简单模式\",\n\tadvanceModeLabel = \"高级模式\",\n}) {\n\tconst [layoutMode, setLayoutMode] = useAtom(layoutModeAtom);\n\treturn (\n\t\t<RadioGroup.Root\n\t\t\tvalue={layoutMode}\n\t\t\tonValueChange={(v) => setLayoutMode(v as LayoutMode)}\n\t\t\tsize=\"1\"\n\t\t>\n\t\t\t<Flex gapY=\"3\" direction=\"column\">\n\t\t\t\t<Text wrap=\"nowrap\" size=\"1\">\n\t\t\t\t\t<RadioGroup.Item value={LayoutMode.Simple}>\n\t\t\t\t\t\t{simpleModeLabel}\n\t\t\t\t\t</RadioGroup.Item>\n\t\t\t\t</Text>\n\t\t\t\t<Text wrap=\"nowrap\" size=\"1\">\n\t\t\t\t\t<RadioGroup.Item value={LayoutMode.Advance}>\n\t\t\t\t\t\t{advanceModeLabel}\n\t\t\t\t\t</RadioGroup.Item>\n\t\t\t\t</Text>\n\t\t\t</Flex>\n\t\t</RadioGroup.Root>\n\t);\n}\n\nconst SyllableDisplayModeField: FC = () => {\n\tconst [displayMode, setDisplayMode] = useAtom(syllableDisplayModeAtom);\n\tconst [showAll, setShowAll] = useAtom(showAllSyllablesAtom);\n\tconst { t } = useTranslation();\n\n\tconst isSyllableMode = displayMode === SyllableDisplayMode.SyllableMode;\n\n\tconst handleSyllableModeToggle = (isChecked: boolean) => {\n\t\tif (isChecked) {\n\t\t\tsetDisplayMode(SyllableDisplayMode.SyllableMode);\n\t\t} else {\n\t\t\tsetDisplayMode(SyllableDisplayMode.LineMode);\n\t\t}\n\t};\n\n\tconst syllableModeCheckboxId = useId();\n\tconst showAllCheckboxId = useId();\n\n\treturn (\n\t\t<Grid columns=\"0fr 0fr\" gap=\"4\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t<Text wrap=\"nowrap\" size=\"1\">\n\t\t\t\t<label htmlFor={syllableModeCheckboxId}>\n\t\t\t\t\t{t(\"ribbonBar.editMode.syllableMode\", \"逐字模式\")}\n\t\t\t\t</label>\n\t\t\t</Text>\n\t\t\t<Checkbox\n\t\t\t\tid={syllableModeCheckboxId}\n\t\t\t\tchecked={isSyllableMode}\n\t\t\t\tonCheckedChange={handleSyllableModeToggle}\n\t\t\t/>\n\t\t\t<Text wrap=\"nowrap\" size=\"1\">\n\t\t\t\t<label htmlFor={showAllCheckboxId}>\n\t\t\t\t\t{t(\"ribbonBar.editMode.showAllSyllables\", \"显示所有音节\")}\n\t\t\t\t</label>\n\t\t\t</Text>\n\t\t\t<Checkbox\n\t\t\t\tid={showAllCheckboxId}\n\t\t\t\tchecked={showAll}\n\t\t\t\tonCheckedChange={(checked) => setShowAll(Boolean(checked))}\n\t\t\t/>\n\t\t</Grid>\n\t);\n};\n\n// function DropdownField<\n// \tL extends Word extends true ? LyricWord : LyricLine,\n// \tF extends keyof L,\n// \tWord extends boolean | undefined = undefined,\n// >({\n// \tlabel,\n// \tisWordField,\n// \tfieldName,\n// \tchildren,\n// \tdefaultValue,\n// }: {\n// \tlabel: string;\n// \tisWordField: Word;\n// \tfieldName: F;\n// \tdefaultValue: L[F];\n// \tchildren?: ReactNode | undefined;\n// }) {\n// \tconst itemAtom = useMemo(\n// \t\t() => (isWordField ? selectedWordsAtom : selectedLinesAtom),\n// \t\t[isWordField],\n// \t);\n// \tconst selectedItems = useAtomValue(itemAtom);\n\n// \tconst [lyricLines, editLyricLines] = useAtom(currentLyricLinesAtom);\n\n// \tconst currentValue = useMemo(() => {\n// \t\tif (selectedItems.size) {\n// \t\t\tif (isWordField) {\n// \t\t\t\tconst selectedWords = selectedItems as Set<string>;\n// \t\t\t\tconst values = new Set();\n// \t\t\t\tfor (const line of lyricLines.lyricLines) {\n// \t\t\t\t\tfor (const word of line.words) {\n// \t\t\t\t\t\tif (selectedWords.has(word.id)) {\n// \t\t\t\t\t\t\tvalues.add(word[fieldName as keyof LyricWord]);\n// \t\t\t\t\t\t}\n// \t\t\t\t\t}\n// \t\t\t\t}\n// \t\t\t\tif (values.size === 1)\n// \t\t\t\t\treturn {\n// \t\t\t\t\t\tmultiplieValues: false,\n// \t\t\t\t\t\tvalue: values.values().next().value as L[F],\n// \t\t\t\t\t} as const;\n// \t\t\t\treturn {\n// \t\t\t\t\tmultiplieValues: true,\n// \t\t\t\t\tvalue: \"\",\n// \t\t\t\t} as const;\n// \t\t\t}\n// \t\t\tconst selectedLines = selectedItems as Set<string>;\n// \t\t\tconst values = new Set();\n// \t\t\tfor (const line of lyricLines.lyricLines) {\n// \t\t\t\tif (selectedLines.has(line.id)) {\n// \t\t\t\t\tvalues.add(line[fieldName as keyof LyricLine]);\n// \t\t\t\t}\n// \t\t\t}\n// \t\t\tif (values.size === 1)\n// \t\t\t\treturn {\n// \t\t\t\t\tmultiplieValues: false,\n// \t\t\t\t\tvalue: values.values().next().value as L[F],\n// \t\t\t\t} as const;\n// \t\t\treturn {\n// \t\t\t\tmultiplieValues: true,\n// \t\t\t\tvalue: \"\",\n// \t\t\t} as const;\n// \t\t}\n// \t\treturn undefined;\n// \t}, [selectedItems, fieldName, isWordField, lyricLines]);\n\n// \treturn (\n// \t\t<>\n// \t\t\t<Text wrap=\"nowrap\" size=\"1\">\n// \t\t\t\t{label}\n// \t\t\t</Text>\n// \t\t\t<Select.Root\n// \t\t\t\tsize=\"1\"\n// \t\t\t\tdisabled={selectedItems.size === 0}\n// \t\t\t\tdefaultValue={defaultValue as string}\n// \t\t\t\tvalue={(currentValue?.value as string) ?? \"\"}\n// \t\t\t\tonValueChange={(value) => {\n// \t\t\t\t\teditLyricLines((state) => {\n// \t\t\t\t\t\tfor (const line of state.lyricLines) {\n// \t\t\t\t\t\t\tif (isWordField) {\n// \t\t\t\t\t\t\t\tfor (const word of line.words) {\n// \t\t\t\t\t\t\t\t\tif (selectedItems.has(word.id)) {\n// \t\t\t\t\t\t\t\t\t\t(word as L)[fieldName] = value as L[F];\n// \t\t\t\t\t\t\t\t\t}\n// \t\t\t\t\t\t\t\t}\n// \t\t\t\t\t\t\t} else {\n// \t\t\t\t\t\t\t\tif (selectedItems.has(line.id)) {\n// \t\t\t\t\t\t\t\t\t(line as L)[fieldName] = value as L[F];\n// \t\t\t\t\t\t\t\t}\n// \t\t\t\t\t\t\t}\n// \t\t\t\t\t\t}\n// \t\t\t\t\t\treturn state;\n// \t\t\t\t\t});\n// \t\t\t\t}}\n// \t\t\t>\n// \t\t\t\t<Select.Trigger\n// \t\t\t\t\tplaceholder={selectedItems.size > 0 ? \"多个值...\" : undefined}\n// \t\t\t\t/>\n// \t\t\t\t<Select.Content>{children}</Select.Content>\n// \t\t\t</Select.Root>\n// \t\t</>\n// \t);\n// }\n\nconst AuxiliaryDisplayField: FC = () => {\n\tconst [showTranslation, setShowTranslation] = useAtom(\n\t\tshowLineTranslationAtom,\n\t);\n\tconst [showRomanization, setShowRomanization] = useAtom(\n\t\tshowLineRomanizationAtom,\n\t);\n\tconst [showWordRomanizationInput, setShowWordRomanizationInput] = useAtom(\n\t\tshowWordRomanizationInputAtom,\n\t);\n\tconst { t } = useTranslation();\n\n\tconst idTranslation = useId();\n\tconst idRomanization = useId();\n\tconst idPerWord = useId();\n\n\treturn (\n\t\t<Grid columns=\"1fr auto\" gapX=\"4\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t<Text size=\"1\" asChild>\n\t\t\t\t<label htmlFor={idTranslation}>\n\t\t\t\t\t{t(\"ribbonBar.editMode.showTranslation\", \"显示翻译行\")}\n\t\t\t\t</label>\n\t\t\t</Text>\n\t\t\t<Checkbox\n\t\t\t\tid={idTranslation}\n\t\t\t\tchecked={showTranslation}\n\t\t\t\tonCheckedChange={(c) => setShowTranslation(Boolean(c))}\n\t\t\t/>\n\t\t\t<Text size=\"1\" asChild>\n\t\t\t\t<label htmlFor={idRomanization}>\n\t\t\t\t\t{t(\"ribbonBar.editMode.showRomanization\", \"显示音译行\")}\n\t\t\t\t</label>\n\t\t\t</Text>\n\t\t\t<Checkbox\n\t\t\t\tid={idRomanization}\n\t\t\t\tchecked={showRomanization}\n\t\t\t\tonCheckedChange={(c) => setShowRomanization(Boolean(c))}\n\t\t\t/>\n\t\t\t<Text size=\"1\" asChild>\n\t\t\t\t<label htmlFor={idPerWord}>\n\t\t\t\t\t{t(\"ribbonBar.editMode.showWordRomanizationInput\", \"显示逐字音译\")}\n\t\t\t\t</label>\n\t\t\t</Text>\n\t\t\t<Checkbox\n\t\t\t\tid={idPerWord}\n\t\t\t\tchecked={showWordRomanizationInput}\n\t\t\t\tonCheckedChange={(c) => setShowWordRomanizationInput(Boolean(c))}\n\t\t\t/>\n\t\t</Grid>\n\t);\n};\n\nexport const EditModeRibbonBar: FC = forwardRef<HTMLDivElement>(\n\t(_props, ref) => {\n\t\tconst editLyricLines = useSetAtom(lyricLinesAtom);\n\t\tconst { t } = useTranslation();\n\n\t\treturn (\n\t\t\t<RibbonFrame ref={ref}>\n\t\t\t\t<RibbonSection label={t(\"ribbonBar.editMode.new\", \"新建\")}>\n\t\t\t\t\t<Grid columns=\"1\" gap=\"1\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"1\"\n\t\t\t\t\t\t\tvariant=\"soft\"\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\teditLyricLines((prev) => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\t\tlyricLines: [...prev.lyricLines, newLyricLine()],\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t(\"ribbonBar.editMode.lyricLine\", \"歌词行\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</RibbonSection>\n\t\t\t\t<RibbonSection label={t(\"ribbonBar.editMode.lineTiming\", \"行时间戳\")}>\n\t\t\t\t\t<Grid columns=\"0fr 1fr\" gap=\"2\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t\t\t\t<EditField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.startTime\", \"起始时间\")}\n\t\t\t\t\t\t\tfieldName=\"startTime\"\n\t\t\t\t\t\t\tparser={parseTimespan}\n\t\t\t\t\t\t\tformatter={msToTimestamp}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<EditField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.endTime\", \"结束时间\")}\n\t\t\t\t\t\t\tfieldName=\"endTime\"\n\t\t\t\t\t\t\tparser={parseTimespan}\n\t\t\t\t\t\t\tformatter={msToTimestamp}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</RibbonSection>\n\t\t\t\t<RibbonSection label={t(\"ribbonBar.editMode.lineProperties\", \"行属性\")}>\n\t\t\t\t\t<Grid columns=\"0fr 0fr\" gap=\"4\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.bgLyric\", \"背景歌词\")}\n\t\t\t\t\t\t\tisWordField={false}\n\t\t\t\t\t\t\tfieldName=\"isBG\"\n\t\t\t\t\t\t\tdefaultValue={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.duetLyric\", \"对唱歌词\")}\n\t\t\t\t\t\t\tisWordField={false}\n\t\t\t\t\t\t\tfieldName=\"isDuet\"\n\t\t\t\t\t\t\tdefaultValue={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.ignoreSync\", \"忽略打轴\")}\n\t\t\t\t\t\t\tisWordField={false}\n\t\t\t\t\t\t\tfieldName=\"ignoreSync\"\n\t\t\t\t\t\t\tdefaultValue={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</RibbonSection>\n\t\t\t\t<RibbonSection label={t(\"ribbonBar.editMode.wordTiming\", \"词时间戳\")}>\n\t\t\t\t\t<Grid columns=\"0fr 1fr\" gap=\"2\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t\t\t\t<EditField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.startTime\", \"起始时间\")}\n\t\t\t\t\t\t\tfieldName=\"startTime\"\n\t\t\t\t\t\t\tisWordField\n\t\t\t\t\t\t\tparser={parseTimespan}\n\t\t\t\t\t\t\tformatter={msToTimestamp}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<EditField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.endTime\", \"结束时间\")}\n\t\t\t\t\t\t\tfieldName=\"endTime\"\n\t\t\t\t\t\t\tisWordField\n\t\t\t\t\t\t\tparser={parseTimespan}\n\t\t\t\t\t\t\tformatter={msToTimestamp}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<EditField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.emptyBeatCount\", \"空拍数量\")}\n\t\t\t\t\t\t\tfieldName=\"emptyBeat\"\n\t\t\t\t\t\t\tisWordField\n\t\t\t\t\t\t\tparser={Number.parseInt}\n\t\t\t\t\t\t\tformatter={String}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</RibbonSection>\n\t\t\t\t<RibbonSection\n\t\t\t\t\tlabel={t(\"ribbonBar.editMode.wordProperties\", \"单词属性\")}\n\t\t\t\t>\n\t\t\t\t\t<Grid columns=\"0fr 1fr\" gap=\"2\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t\t\t\t<EditField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.wordContent\", \"单词内容\")}\n\t\t\t\t\t\t\tfieldName=\"word\"\n\t\t\t\t\t\t\tisWordField\n\t\t\t\t\t\t\tparser={(v) => v}\n\t\t\t\t\t\t\tformatter={(v) => v}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<EditField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.romanWord\", \"单词音译\")}\n\t\t\t\t\t\t\tfieldName=\"romanWord\"\n\t\t\t\t\t\t\tisWordField\n\t\t\t\t\t\t\tparser={(v) => v}\n\t\t\t\t\t\t\tformatter={(v) => v || \"\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.obscene\", \"不雅用语\")}\n\t\t\t\t\t\t\tisWordField\n\t\t\t\t\t\t\tfieldName=\"obscene\"\n\t\t\t\t\t\t\tdefaultValue={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</RibbonSection>\n\t\t\t\t<RibbonSection\n\t\t\t\t\tlabel={t(\"ribbonBar.editMode.secondaryContent\", \"次要内容\")}\n\t\t\t\t>\n\t\t\t\t\t<Grid columns=\"0fr 1fr\" gap=\"2\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t\t\t\t<EditField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.translatedLyric\", \"翻译歌词\")}\n\t\t\t\t\t\t\tfieldName=\"translatedLyric\"\n\t\t\t\t\t\t\tparser={(v) => v}\n\t\t\t\t\t\t\tformatter={(v) => v}\n\t\t\t\t\t\t\ttextFieldStyle={{ width: \"20em\" }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<EditField\n\t\t\t\t\t\t\tlabel={t(\"ribbonBar.editMode.romanLyric\", \"音译歌词\")}\n\t\t\t\t\t\t\tfieldName=\"romanLyric\"\n\t\t\t\t\t\t\tparser={(v) => v}\n\t\t\t\t\t\t\tformatter={(v) => v}\n\t\t\t\t\t\t\ttextFieldStyle={{ width: \"20em\" }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</RibbonSection>\n\t\t\t\t<RibbonSection label={t(\"ribbonBar.editMode.layoutMode\", \"布局模式\")}>\n\t\t\t\t\t<EditModeField\n\t\t\t\t\t\tsimpleModeLabel={t(\n\t\t\t\t\t\t\t\"settings.common.layoutModeOptions.simple\",\n\t\t\t\t\t\t\t\"简单模式\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tadvanceModeLabel={t(\n\t\t\t\t\t\t\t\"settings.common.layoutModeOptions.advance\",\n\t\t\t\t\t\t\t\"高级模式\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</RibbonSection>\n\t\t\t\t<RibbonSection\n\t\t\t\t\tlabel={t(\"ribbonBar.editMode.auxiliaryLineDisplay\", \"辅助行显示\")}\n\t\t\t\t>\n\t\t\t\t\t<AuxiliaryDisplayField />\n\t\t\t\t</RibbonSection>\n\t\t\t\t<RibbonSection\n\t\t\t\t\tlabel={t(\"ribbonBar.editMode.syllableDisplayMode\", \"音节显示模式\")}\n\t\t\t\t>\n\t\t\t\t\t<SyllableDisplayModeField />\n\t\t\t\t</RibbonSection>\n\t\t\t</RibbonFrame>\n\t\t);\n\t},\n);\n\nexport default EditModeRibbonBar;\n"],"names":["MULTIPLE_VALUES","Symbol","EditField","t0","$","_c","label","isWordField","fieldName","formatter","parser","textFieldStyle","fieldInput","setFieldInput","useState","undefined","fieldPlaceholder","setFieldPlaceholder","itemAtom","selectedWordsAtom","selectedLinesAtom","editLyricLines","useSetImmerAtom","lyricLinesAtom","t","useTranslation","setEditingTimeField","useSetAtom","editingTimeFieldAtom","requestFocus","setRequestFocus","useAtom","requestFocusAtom","inputRef","useRef","t1","t2","current","focus","useEffect","t3","atom","get","selectedItems","size","lyricLines","selectedWords","line","word","words","has","id","startTime","endTime","selectedLines","line_0","hasError","useAtomValue","t4","get_0","selectedItems_0","lyricLines_0","selectedWords_0","values","Set","line_1","word_0","add","next","value","selectedLines_0","values_0","line_2","currentValue","store","useStore","t5","rawValue","selectedItems_1","state","line_3","word_1","onInputFinished","t6","t7","useLayoutEffect","t8","Text","t9","t10","t11","width","t12","t13","t14","for","evt","currentTarget","t15","evt_0","key","t16","isWord","field","t17","evt_1","t18","jsx","TextField.Root","t19","CheckboxField","defaultValue","isDisabled","checkboxId","useId","Checkbox","EditModeField","simpleModeLabel","advanceModeLabel","layoutMode","setLayoutMode","layoutModeAtom","v","RadioGroup.Item","LayoutMode","Simple","Advance","Flex","SyllableDisplayModeField","displayMode","setDisplayMode","syllableDisplayModeAtom","showAll","setShowAll","showAllSyllablesAtom","isSyllableMode","SyllableDisplayMode","SyllableMode","isChecked","LineMode","handleSyllableModeToggle","syllableModeCheckboxId","showAllCheckboxId","checked","Boolean","Grid","AuxiliaryDisplayField","showTranslation","setShowTranslation","showLineTranslationAtom","showRomanization","setShowRomanization","showLineRomanizationAtom","showWordRomanizationInput","setShowWordRomanizationInput","showWordRomanizationInputAtom","idTranslation","idRomanization","idPerWord","c","c_0","c_1","EditModeRibbonBar","forwardRef","_props","ref","_temp","Button","RibbonSection","parseTimespan","msToTimestamp","jsxs","t20","t21","t22","t23","t24","t25","t26","t27","Number","parseInt","String","t28","t29","t30","t31","t32","_temp2","_temp3","t33","t34","_temp4","_temp5","t35","t36","t37","t38","t39","t40","t41","t42","_temp6","_temp7","t43","t44","t45","_temp8","_temp9","t46","t47","t48","t49","t50","t51","t52","t53","t54","t55","t56","t57","t58","t59","RibbonFrame","prev","newLyricLine","v_0","v_1","v_2","v_3","v_4","v_5","v_6"],"mappings":"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"}