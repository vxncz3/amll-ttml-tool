{"version":3,"file":"preview-mode-DZ-hpYOF.js","sources":["../../src/components/RibbonBar/preview-mode.tsx"],"sourcesContent":["/*\n * Copyright 2023-2025 Steve Xiao (stevexmh@qq.com) and contributors.\n *\n * 本源代码文件是属于 AMLL TTML Tool 项目的一部分。\n * This source code file is a part of AMLL TTML Tool project.\n * 本项目的源代码的使用受到 GNU GENERAL PUBLIC LICENSE version 3 许可证的约束，具体可以参阅以下链接。\n * Use of this source code is governed by the GNU GPLv3 license that can be found through the following link.\n *\n * https://github.com/Steve-xmh/amll-ttml-tool/blob/main/LICENSE\n */\n\nimport { Checkbox, Grid, Text, TextField } from \"@radix-ui/themes\";\nimport { useAtom } from \"jotai\";\nimport { forwardRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n\tlyricWordFadeWidthAtom,\n\tshowRomanLinesAtom,\n\tshowTranslationLinesAtom,\n} from \"$/states/preview.ts\";\nimport { RibbonFrame, RibbonSection } from \"./common\";\n\nexport const PreviewModeRibbonBar = forwardRef<HTMLDivElement>(\n\t(_props, ref) => {\n\t\tconst [showTranslationLine, setShowTranslationLine] = useAtom(\n\t\t\tshowTranslationLinesAtom,\n\t\t);\n\t\tconst [showRomanLine, setShowRomanLine] = useAtom(showRomanLinesAtom);\n\t\tconst [lyricWordFadeWidth, setLyricWordFadeWidth] = useAtom(\n\t\t\tlyricWordFadeWidthAtom,\n\t\t);\n\t\tconst { t } = useTranslation();\n\n\t\treturn (\n\t\t\t<RibbonFrame ref={ref}>\n\t\t\t\t<RibbonSection label={t(\"ribbonBar.previewMode.lyrics\", \"歌词\")}>\n\t\t\t\t\t<Grid columns=\"0fr 0fr\" gap=\"2\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t\t\t\t<Text wrap=\"nowrap\" size=\"1\">\n\t\t\t\t\t\t\t{t(\"ribbonBar.previewMode.showTranslation\", \"显示翻译\")}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tchecked={showTranslationLine}\n\t\t\t\t\t\t\tonCheckedChange={(v) => setShowTranslationLine(!!v)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Text wrap=\"nowrap\" size=\"1\">\n\t\t\t\t\t\t\t{t(\"ribbonBar.previewMode.showRoman\", \"显示音译\")}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tchecked={showRomanLine}\n\t\t\t\t\t\t\tonCheckedChange={(v) => setShowRomanLine(!!v)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</RibbonSection>\n\t\t\t\t<RibbonSection label={t(\"ribbonBar.previewMode.word\", \"单词\")}>\n\t\t\t\t\t<Grid columns=\"0fr 0fr\" gap=\"2\" gapY=\"1\" flexGrow=\"1\" align=\"center\">\n\t\t\t\t\t\t<Text wrap=\"nowrap\" size=\"1\">\n\t\t\t\t\t\t\t{t(\"ribbonBar.previewMode.fadeWidth\", \"过渡宽度\")}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<TextField.Root\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tstep={0}\n\t\t\t\t\t\t\tsize=\"1\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: \"4em\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdefaultValue={lyricWordFadeWidth}\n\t\t\t\t\t\t\tonBlur={(e) => {\n\t\t\t\t\t\t\t\tconst value = Number.parseFloat(e.target.value);\n\t\t\t\t\t\t\t\tif (Number.isFinite(value)) {\n\t\t\t\t\t\t\t\t\tsetLyricWordFadeWidth(value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</RibbonSection>\n\t\t\t</RibbonFrame>\n\t\t);\n\t},\n);\n\nexport default PreviewModeRibbonBar;\n"],"names":["PreviewModeRibbonBar","forwardRef","_props","ref","$","_c","showTranslationLine","setShowTranslationLine","useAtom","showTranslationLinesAtom","showRomanLine","setShowRomanLine","showRomanLinesAtom","lyricWordFadeWidth","setLyricWordFadeWidth","lyricWordFadeWidthAtom","t","useTranslation","t0","t1","t2","Text","t3","v","t4","jsx","Checkbox","t5","t6","t7","v_0","t8","t9","Grid","t10","RibbonSection","t11","t12","t13","t14","Symbol","for","width","t15","e","value","Number","parseFloat","target","isFinite","t16","TextField.Root","t17","jsxs","t18","t19","RibbonFrame"],"mappings":"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"}